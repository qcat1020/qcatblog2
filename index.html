<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCat Blog</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            text-align: center;
        }
        header {
            background-color: #333;
            color: white;
            padding: 20px;
            font-size: 24px;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .section {
            margin-top: 20px;
            padding: 10px;
            border-bottom: 2px solid #ddd;
        }
        .section h2 {
            margin: 0;
            color: #333;
        }
        .post {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .post h3 {
            margin: 0;
            color: #333;
        }
        .post p {
            color: #666;
        }
        a {
            text-decoration: none;
            color: #007bff;
        }
    </style>
</head>
<body>
    <header>
    QCat Blog
    <br>
    <a href="post.html">
        <button style="margin-top: 10px; padding: 10px; font-size: 16px;">Post Something</button>
    </a>
</header>

    <div class="container">
        
        <div class="section" id="writings">
            <h2>My Writings</h2>
            <div class="post">
                <h3><a href="#">Sample Writing Post 1</a></h3>
                <p>Short description of the writing...</p>
            </div>
            <div class="post">
                <h3><a href="#">Sample Writing Post 2</a></h3>
                <p>Another short description...</p>
            </div>
        </div>
        
        <div class="section" id="translations">
            <h2>Translations</h2>
            <div class="post">
                <h3><a href="#">Sample Translation 1</a></h3>
                <p>A brief overview of the translated content...</p>
            </div>
            <div class="post">
                <h3><a href="#">Sample Translation 2</a></h3>
                <p>Another translated piece...</p>
            </div>
        </div>

        <!-- Comment Section (Disqus) -->
        <div id="disqus_thread"></div>
        <script>
    async function loadPosts() {
        const repoOwner = "qcat1020";  // 你的 GitHub 用户名
        const repoName = "qcat-blog";  // 你的博客仓库名
        const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/issues?labels=blog&state=open`;

        try {
            const response = await fetch(apiUrl);
            const issues = await response.json();

            const writingsSection = document.getElementById("writings");
            const translationsSection = document.getElementById("translations");

            writingsSection.innerHTML = "<h2>My Writings</h2>";
            translationsSection.innerHTML = "<h2>Translations</h2>";

            issues.forEach(issue => {
                let postDiv = document.createElement("div");
                postDiv.className = "post";
                postDiv.innerHTML = `<h3><a href="post.html?id=${issue.number}">${issue.title}</a></h3>
                                     <p>${issue.body.substring(0, 100)}...</p>`;

                if (issue.labels.some(label => label.name === "translation")) {
                    translationsSection.appendChild(postDiv);
                } else {
                    writingsSection.appendChild(postDiv);
                }
            });
        } catch (error) {
            console.error("Error fetching GitHub Issues:", error);
        }
    }

    window.onload = loadPosts;
</script>

    </div>
</body>
</html>
